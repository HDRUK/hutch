---
- name: Install WfExS
  hosts: tre_server
  tasks:
    - name: Clone WfExS
      ansible.builtin.git:
        repo: https://github.com/dcl10/WfExS-backend.git
        dest: $HOME/WfExS-backend
        version: "main"

    - name: WfExS virtual enviroment
      ansible.builtin.command:
        cmd: python3 -m venv .pyWEenv
        chdir: $HOME/WfExS-backend
        creates: $HOME/WfExS-backend/.pyWEenv

    - name: Install WfExS basic requirements
      ansible.builtin.command:
        cmd: ./full-installer.bash
        chdir: $HOME/WfExS-backend
